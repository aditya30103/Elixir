module.exports = {

"[project]/.next-internal/server/app/api/why/route/actions.js [app-rsc] (server actions loader, ecmascript)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[project]/data/journey.json (json)": ((__turbopack_context__) => {

__turbopack_context__.v(JSON.parse("{\"member\":{\"name\":\"Rohan Patel\",\"age\":46,\"location\":\"Singapore\",\"profession\":\"Senior Finance Executive\",\"baseline\":{\"bloodPressure\":\"136/88 mmHg\",\"restingHR\":\"58 bpm\",\"HRV\":\"42 ms\"}},\"episodes\":[{\"id\":\"E01\",\"title\":\"Establishing the Baseline\",\"weeks\":\"1-4\",\"granularEvents\":[{\"eventId\":\"E01-01\",\"week\":1,\"title\":\"Initial consult scheduling\",\"description\":\"Ruby coordinates initial consults with Dr. Warren, Carla and Rachel.\",\"sourceCommunication\":\"Ruby (Elyx): \\\"Hi Sarah, hope you're having a good start to the week. I'm looking to get Rohan's initial consultations with his Elyx team (Dr. Warren, Carla, and Rachel) on the calendar...\\\"\",\"timestamp\":\"8/25/25, 9:55 AM\"},{\"eventId\":\"E01-02\",\"week\":1,\"title\":\"Whoop/Garmin data access requested\",\"description\":\"Rohan asks who needs access and requests data privacy/security protocols.\",\"sourceCommunication\":\"Rohan Patel: \\\"Ruby, Sarah is handling the scheduling. While she does that, who needs access to my Whoop and Garmin data? Also, please send over your data privacy and security protocols.\\\"\",\"timestamp\":\"8/25/25, 11:28 AM\"},{\"eventId\":\"E01-03\",\"week\":1,\"title\":\"Wearable sync confirmed\",\"description\":\"Advik confirms wearable sync and initial pattern detection for HRV / sleep.\",\"sourceCommunication\":\"Advik (Elyx): \\\"Advik: Data sync is successful. I'm already seeing some interesting patterns in your HRV and sleep data over the last month. We'll use this as our starting point for our experiments.\\\"\",\"timestamp\":\"8/25/25, 12:08 PM\"},{\"eventId\":\"E01-04\",\"week\":1,\"title\":\"Baseline consult confirmed by Dr. Warren\",\"description\":\"Dr. Warren confirms the initial consultation and intention to establish a clinical baseline.\",\"sourceCommunication\":\"Dr. Warren: \\\"Dr. Warren: Rohan, Dr. Warren. I see our initial consultation is confirmed. I look forward to reviewing your medical history and establishing a precise clinical baseline to target your cardiovascular and cognitive health goals.\\\"\",\"timestamp\":\"8/25/25, 3:19 PM\"},{\"eventId\":\"E01-05\",\"week\":1,\"title\":\"Anticipatory stress hypothesis surfaced\",\"description\":\"Advik describes consistent 15-20% dip in overnight HRV before travel—a first hypothesis.\",\"sourceCommunication\":\"Advik (Elyx): \\\"Advik: Of course, Rohan. The most immediate pattern is a consistent 15-20% dip in your overnight HRV on nights preceding international travel, based on your calendar. This is our first hypothesis: a measurable anticipatory stress response.\\\"\",\"timestamp\":\"8/25/25, 4:17 PM\"},{\"eventId\":\"E01-06\",\"week\":1,\"title\":\"London is flagged as a stress-test\",\"description\":\"Team and member note that the upcoming London trip will be an important real-world stress test to validate the baseline.\",\"sourceCommunication\":\"Ruby / Team messages around 8/25: scheduling and travel notes; (explicit London travel discussion appears in subsequent threads referencing travel as the first real stress test).\",\"timestamp\":\"8/25/25 – travel thread\"}]},{\"id\":\"E02\",\"title\":\"The First Experiment & Clinical Baseline\",\"weeks\":\"5-9\",\"granularEvents\":[{\"eventId\":\"E02-01\",\"week\":2,\"title\":\"Sleep consistency emphasized\",\"description\":\"Team emphasizes sleep as the primary lever for week-to-week improvements.\",\"sourceCommunication\":\"Carla / Team messages (8/26–8/29): guidance sent on sleep hygiene and consistency as the first high-priority habit.\",\"timestamp\":\"8/26/25 – 8/29/25\"},{\"eventId\":\"E02-02\",\"week\":2,\"title\":\"Early improvements recorded\",\"description\":\"Logs show early improvements in sleep adherence (e.g., 75% → 82% in this phase).\",\"sourceCommunication\":\"Nutrition / wearable notes in chat referencing better sleep consistency and early positive signals in HRV/BP.\",\"timestamp\":\"late Aug 2025\"},{\"eventId\":\"E02-03\",\"week\":2,\"title\":\"No major friction recorded\",\"description\":\"Team notes this period had smooth execution—no reported scheduling or adherence incidents.\",\"sourceCommunication\":\"Chat threads indicate no major friction logged for the period; focus on steady baseline work.\",\"timestamp\":\"Aug 26–Sep 1, 2025\"}]},{\"id\":\"E03\",\"title\":\"Decoding the Data, Refining the Strategy\",\"weeks\":\"10-14\",\"granularEvents\":[{\"eventId\":\"E03-01\",\"week\":3,\"title\":\"Comprehensive panel ordered\",\"description\":\"Dr. Warren orders the diagnostic panel to establish labs including ApoB and hs-CRP.\",\"sourceCommunication\":\"Dr. Warren (chat): \\\"Panel to establish clinical baseline; monitor hs-CRP correlation.\\\"\",\"timestamp\":\"8/27/25\"},{\"eventId\":\"E03-02\",\"week\":3,\"title\":\"ApoB elevated and flagged\",\"description\":\"Initial labs show elevated ApoB; team flags it as a primary actionable risk factor.\",\"sourceCommunication\":\"Dr. Warren (8/28): \\\"ApoB decreased to 98 mg/dL; goal <80 mg/dL.\\\" and earlier notes of elevated ApoB in the baseline reading.\",\"timestamp\":\"8/28/25\"},{\"eventId\":\"E03-03\",\"week\":3,\"title\":\"Dinner experiment proposed\",\"description\":\"Team proposes testing late-night meal composition (protein/veg + limited alcohol) to see if HRV suppression is mitigated.\",\"sourceCommunication\":\"Advik (8/29): \\\"Late dinner experiment: prioritize protein/veg; cap alcohol; expect ~50% reduction in HRV suppression.\\\"\",\"timestamp\":\"8/29/25\"},{\"eventId\":\"E03-04\",\"week\":3,\"title\":\"Zone 2 volume increase\",\"description\":\"Team recommends increasing Zone 2 cardio volume to improve mitochondrial health and cardiovascular efficiency.\",\"sourceCommunication\":\"Advik / planning messages referencing increasing cardio minutes and zone guidance.\",\"timestamp\":\"late Aug 2025\"},{\"eventId\":\"E03-05\",\"week\":3,\"title\":\"Plant sterol / nutrition intervention\",\"description\":\"Carla reduces saturated fat target and adds plant sterols / soluble fiber to target ApoB.\",\"sourceCommunication\":\"Carla (8/28): \\\"Reduced saturated fat to <7% kcal; specific food swaps planned. Added 2 g/d plant sterols targeting 10–15% LDL-C lowering.\\\"\",\"timestamp\":\"8/28/25\"}]},{\"id\":\"E04\",\"title\":\"Mastering Travel & Expanding Horizons\",\"weeks\":\"15-20\",\"granularEvents\":[{\"eventId\":\"E04-01\",\"week\":4,\"title\":\"Singapore travel stress-check\",\"description\":\"Trip to Singapore used to stress-test resilience; team notes performance near baseline.\",\"sourceCommunication\":\"Travel notes and wearable summaries show Rohan maintained HRV/RHR near baseline during Singapore travel.\",\"timestamp\":\"late Aug / early Sep 2025\"},{\"eventId\":\"E04-02\",\"week\":4,\"title\":\"Workout schedule failure identified\",\"description\":\"Rohan reports a 60% failure rate for post-5pm workouts; frames the problem as a system design issue.\",\"sourceCommunication\":\"Rohan (8/31): \\\"Reported 60% failure rate for after-5pm workouts; requested creative model.\\\"\",\"timestamp\":\"8/31/25\"},{\"eventId\":\"E04-03\",\"week\":4,\"title\":\"System redesign principle set\",\"description\":\"Neel/strategist recommends anchoring plans around physiological readiness (HRV/sleep) rather than calendar convenience.\",\"sourceCommunication\":\"Neel (8/31): \\\"Anchor plan to protect physiological readiness (HRV/sleep), not just session completion.\\\"\",\"timestamp\":\"8/31/25\"},{\"eventId\":\"E04-04\",\"week\":4,\"title\":\"Golf performance goal introduced\",\"description\":\"Rohan expresses interest in sport-specific optimization (golf), prompting a dedicated block for rotational power and mobility.\",\"sourceCommunication\":\"Rohan/team messages indicating new performance goal: golf training.\",\"timestamp\":\"early Sep 2025\"}]},{\"id\":\"E05\",\"title\":\"System Failure, Clinical Success\",\"weeks\":\"21-26\",\"granularEvents\":[{\"eventId\":\"E05-01\",\"week\":5,\"title\":\"Quarterly diagnostics: major improvements\",\"description\":\"Quarterly labs reveal large reductions in ApoB and hs-CRP; team celebrates clinical wins.\",\"sourceCommunication\":\"Dr. Warren (9/02): \\\"Baseline ApoB 115 → 82 mg/dL; baseline hs-CRP 2.8 → 0.9 mg/L.\\\"\",\"timestamp\":\"9/02/25\"},{\"eventId\":\"E05-02\",\"week\":5,\"title\":\"ASCVD risk updated\",\"description\":\"Team reports large relative reduction in 10-year ASCVD risk after interventions.\",\"sourceCommunication\":\"Dr. Warren (9/02): \\\"Estimated 45.6% relative reduction in 10-yr ASCVD risk; risk class moved from Intermediate to Borderline.\\\"\",\"timestamp\":\"9/02/25\"},{\"eventId\":\"E05-03\",\"week\":5,\"title\":\"Acute illness detected via wearable\",\"description\":\"Whoop/wearable detection shows HRV drop and RHR rise; team pivots to sick-day protocol and rest.\",\"sourceCommunication\":\"Advik/Rachel messages (early Sep 2025): \\\"HRV dropped ~15 ms; RHR up ~8 bpm — classic immune response pattern.\\\" & 'Swapped strength for light mobility/breathing; rest prioritized.'\",\"timestamp\":\"9/01/25\"},{\"eventId\":\"E05-04\",\"week\":5,\"title\":\"Adaptive recovery protocol executed\",\"description\":\"Elyx activates sick-day measures including rest, IV + supportive care coordination (documented in logs previously).\",\"sourceCommunication\":\"Team: sick day protocol activation messages and logistics to support rapid recovery (IV/fluids/monitoring).\",\"timestamp\":\"early Sep 2025\"}]},{\"id\":\"E06\",\"title\":\"Achieving Resilience, Personalizing the Future\",\"weeks\":\"27-32\",\"granularEvents\":[{\"eventId\":\"E06-01\",\"week\":6,\"title\":\"Genetic testing ordered\",\"description\":\"Dr. Warren authorizes ApoE and MTHFR testing to enable hyper-personalized next-phase interventions.\",\"sourceCommunication\":\"Dr. Warren (9/02): \\\"Authorized genetic panel for ApoE and MTHFR.\\\"\",\"timestamp\":\"9/02/25\"},{\"eventId\":\"E06-02\",\"week\":6,\"title\":\"32-week biomarker review\",\"description\":\"Team presents 32-week report showing major risk reductions and recommends next-phase personalization.\",\"sourceCommunication\":\"Summary messages (9/02): \\\"32-week report shows ~45.6% relative reduction in 10-yr ASCVD risk; ApoB and hs-CRP down substantially.\\\"\",\"timestamp\":\"9/02/25\"},{\"eventId\":\"E06-03\",\"week\":6,\"title\":\"Travel resilience confirmed\",\"description\":\"Whoop/wearable data shows recovery & HRV volatility improvements compared to early travel—team marks this as resilience achieved.\",\"sourceCommunication\":\"Wearable summary lines: travel recovery metrics improved (HRV volatility down ~40%, Recovery ~88%).\",\"timestamp\":\"late Aug–early Sep 2025\"}]}]}"));}),
"[project]/app/api/why/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

// import { NextResponse } from "next/server";
// import journeyData from "@/data/journey.json";
// import { JourneyData, Episode, Event } from "@/types/journey";
// import { NextRequest, NextResponse } from 'next/server';
// export async function POST(req: NextRequest) {
//   try {
//     const { question } = await req.json();
//     console.log("✅ [Next.js API] Received question:", question);
//     const backendUrl = 'http://127.0.0.1:8000/ask';
//     console.log("✅ [Next.js API] Forwarding to backend:", backendUrl);
//     const response = await fetch(backendUrl, {
//       method: 'POST',
//       headers: {
//         'Content-Type': 'application/json',
//       },
//       body: JSON.stringify({ question }),
//     });
//     console.log("✅ [Next.js API] Backend response status:", response.status);
//     if (!response.ok) {
//       const errorText = await response.text();
//       console.error("❌ [Next.js API] Backend error:", errorText);
//       throw new Error(`Backend request failed with status ${response.status}`);
//     }
//     const data = await response.json();
//     console.log("✅ [Next.js API] Received data from backend:", data);
//     return NextResponse.json(data);
//   } catch (error) {
//     console.error("❌ [Next.js API] Error in /api/why:", error);
//     return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });
//   }
// }
// // Cast JSON as JourneyData
// const data: JourneyData = journeyData as JourneyData;
// export async function POST(req: Request) {
//   try {
//     const { eventId } = await req.json();
//     let foundEvent: Event | null = null;
//     let parentEpisode: Episode | null = null;
//     // Search for event inside episodes
//     for (const ep of data.episodes) {
//       const match = ep.granularEvents.find((ev) => ev.eventId === eventId);
//       if (match) {
//         foundEvent = match;
//         parentEpisode = ep;
//         break;
//       }
//     }
//     if (!foundEvent) {
//       return NextResponse.json(
//         { error: "Event not found" },
//         { status: 404 }
//       );
//     }
//     // For now: return sourceCommunication as the "why"
//     return NextResponse.json({
//       eventId,
//       why: foundEvent.sourceCommunication,
//       source: {
//         episodeTitle: parentEpisode?.title,
//         eventTitle: foundEvent.title,
//       },
//     });
//   } catch (err) {
//     if (err instanceof Error) {
//       return NextResponse.json({ error: err.message }, { status: 500 });
//     }
//     return NextResponse.json({ error: "Unknown error" }, { status: 500 });
//   }
// }
__turbopack_context__.s({
    "POST": ()=>POST
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$data$2f$journey$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/data/journey.json (json)");
;
;
// Cast JSON as JourneyData
const data = __TURBOPACK__imported__module__$5b$project$5d2f$data$2f$journey$2e$json__$28$json$29$__["default"];
async function POST(req) {
    try {
        const body = await req.json();
        // --- Logic for the RAG Chatbot ---
        if (body.question) {
            console.log("✅ [Next.js API] Received question:", body.question);
            const backendUrl = 'http://127.0.0.1:8000/ask';
            console.log("✅ [Next.js API] Forwarding to backend:", backendUrl);
            const response = await fetch(backendUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    question: body.question
                })
            });
            console.log("✅ [Next.js API] Backend response status:", response.status);
            if (!response.ok) {
                const errorText = await response.text();
                console.error("❌ [Next.js API] Backend error:", errorText);
                throw new Error(`Backend request failed with status ${response.status}`);
            }
            const data = await response.json();
            console.log("✅ [Next.js API] Received data from backend:", data);
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(data);
        }
        // --- Original Logic for finding an Event ---
        if (body.eventId) {
            let foundEvent = null;
            let parentEpisode = null;
            for (const ep of data.episodes){
                const match = ep.granularEvents.find((ev)=>ev.eventId === body.eventId);
                if (match) {
                    foundEvent = match;
                    parentEpisode = ep;
                    break;
                }
            }
            if (!foundEvent) {
                return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                    error: "Event not found"
                }, {
                    status: 404
                });
            }
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                eventId: body.eventId,
                why: foundEvent.sourceCommunication,
                source: {
                    episodeTitle: parentEpisode?.title,
                    eventTitle: foundEvent.title
                }
            });
        }
        // If the request body has neither 'question' nor 'eventId'
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Invalid request body"
        }, {
            status: 400
        });
    } catch (err) {
        console.error("❌ [Next.js API] Error in /api/why:", err);
        if (err instanceof Error) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: err.message
            }, {
                status: 500
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Unknown error"
        }, {
            status: 500
        });
    }
}
}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__ada66d30._.js.map